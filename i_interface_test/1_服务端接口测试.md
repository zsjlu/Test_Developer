# 服务端接口测试

接口测试价值与体系

如果把简单测试分为两类，那么就是客户端测试和服务端测试。
客户端的测试包括UI测试，兼容性测试等，服务端测试包括接口测试。
接口测试检查数据的交换，传递和控制管理过程，它绕过了
客户端，直接对服务端进行测试。

接口测试的价值

服务端非常复杂，组件与组件之间进行交互，形成了密集的后端
网络。UI测试无法覆盖这么复杂的组件交互网络，所以要绕过
客户端，直接只用接口测试对服务端进行测试。

接口测试的体系

分层测试

    UI--Service--Unit
    
客户端测试与服务端测试的关系

虽然接口测试覆盖广，但是也不能使用接口测试替代客户端测试。
UI测试测试涉及到了用户体验的问题，这部分是无法用接口测试
进行替代的。

    tcp/udp/http/restful/dubbo等协议区别于解读


## 抓包分析tcp协议

TCP协议是在传输层中，一种面向连接的、可靠的、基于字节流的
传输层通信协议。

环境准备

对接口测试工具进行分类，可以分如下几类：

- 网络嗅探工具：tcpdump， wireshark    
- 代理工具：fddler，charles，anyproxyburpsuite，mitmproxy   
- 分析工具： curl，postman，chrome Devtool

## 抓包分析tcp协议

tcpdump

tcpdump：将网络中传送的数据包的“头”完全截获下来提供分析。
它支持针对网络层、协议、主机、网络或端口的过滤，并提供
and、or、not等逻辑语句来帮助你去掉无用的信息。

让tcpdump时刻监听443端口，如果有异样就输入到log文件中

    sudo tcpdump port 443 -v -w /tmp/tcp.log
    # -v 输出更加纤细的信息
    # -w 把数据写到log中
        
利用这条命令，会把得到的报告放到目录/tmp/tcp.log中。

wireshark


        